{
  "info": {
    "_postman_id": "c2586651-73ef-4971-91be-2349857af368",
    "name": "dog and food",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "51332705",
    "_collection_link": "https://go.postman.co/collection/51332705-c2586651-73ef-4971-91be-2349857af368?source=collection_link"
  },
  "item": [
    {
      "name": "dog",
      "item": [
        {
          "name": "get all dogs",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 1Ô∏è‚É£ Status code is 200",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "// 2Ô∏è‚É£ Response body contains arrays of dogs",
                  "pm.test(\"Response body contains array of dogs\", function () {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body).to.have.property(\"data\");",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "// 3Ô∏è‚É£ Validate all required fields",
                  "pm.test(\"Each dog has required fields if present\", function () {",
                  "    const body = pm.response.json();",
                  "    body.data.forEach(dog => {",
                  "         // _id exists and valid",
                  "        pm.expect(dog).to.have.property(\"_id\").",
                  "        that.is.a(\"string\").with.lengthOf(24);",
                  "        // name",
                  "        pm.expect(dog).to.have.property(\"name\").that.is.a(\"string\");",
                  "",
                  "        // Optional: only test if property exists",
                  "        if (dog.hasOwnProperty(\"breed\")) pm.expect(dog.breed).to.be.a(\"string\");",
                  "        if (dog.hasOwnProperty(\"size\")) pm.expect(dog.size).to.be.a(\"string\");",
                  "        if (dog.hasOwnProperty(\"age\")) pm.expect(dog.age).to.be.a(\"number\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ]
            }
          },
          "response": []
        },
        {
          "name": "get dog by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Accept 200 for found, 404 if not found",
                  "pm.test(\"Get dog by id: status is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "let body;",
                  "try {",
                  "    body = pm.response.json();",
                  "} catch (e) {",
                  "    body = null;",
                  "}",
                  "",
                  "if (pm.response.code === 200 && body && body.data) {",
                  "    const dog = body.data;",
                  "",
                  "    pm.test(\"Get dog by id: dog has expected fields\", function () {",
                  "        pm.expect(dog).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "        pm.expect(dog).to.have.property(\"name\").that.is.a(\"string\");",
                  "        pm.expect(dog).to.have.property(\"breed\").that.is.a(\"string\");",
                  "        pm.expect(dog).to.have.property(\"size\").that.is.a(\"string\");",
                  "        pm.expect(dog).to.have.property(\"age\").that.is.a(\"number\");",
                  "    });",
                  "",
                  "    // üîë Save dogId",
                  "    pm.collectionVariables.set(\"dogId\", dog._id);",
                  "",
                  "    pm.test(\"dogId collection variable set from get dog by id\", function () {",
                  "        pm.expect(pm.collectionVariables.get(\"dogId\")).to.eql(dog._id);",
                  "    });",
                  "",
                  "} else if (pm.response.code === 404) {",
                  "    pm.test(\"Get dog by id: dog not found\", function () {",
                  "        pm.expect(body && body.message && body.message.toLowerCase()).to.include(\"not found\");",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/dog/{{dogId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog",
                "{{dogId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "update dog",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Updated dog fields are reflected\", function () {",
                  "    const { data } = pm.response.json();",
                  "});",
                  "",
                  "pm.test(\"Updated dog still has required fields\", function () {",
                  "    const { data } = pm.response.json();",
                  "    pm.expect(data).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "    pm.expect(data).to.have.property(\"name\").that.is.a(\"string\");",
                  "    pm.expect(data).to.have.property(\"breed\").that.is.a(\"string\");",
                  "    pm.expect(data).to.have.property(\"size\").that.is.a(\"string\");",
                  "    pm.expect(data).to.have.property(\"age\").that.is.a(\"number\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\" : \"sally\",\n    \"breed\" : \"silly\",\n    \"size\" : \"Big\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog/69716392e0bf6bb607186a9a",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog",
                "69716392e0bf6bb607186a9a"
              ]
            }
          },
          "response": []
        },
        {
          "name": "delete dog by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const dogId = pm.collectionVariables.get(\"dogId\");",
                  "const baseUrl = pm.environment.get(\"baseUrl\") || \"http://localhost:5001/api/v1/dog\";",
                  "// 1Ô∏è‚É£ DELETE status check",
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "// 2Ô∏è‚É£ DELETE response confirmation",
                  "pm.test(\"Response confirms deletion\", function () {",
                  "    if (pm.response.code === 200) {",
                  "        const body = pm.response.json();",
                  "        pm.expect(body).to.have.property(\"message\");",
                  "        pm.expect(body.message.toLowerCase()).to.include(\"delete\");",
                  "    }",
                  "});",
                  "// 3Ô∏è‚É£ Confirm the dog is actually deleted",
                  "pm.sendRequest(",
                  "    {",
                  "        url: `${baseUrl}/dog/${dogId}`,",
                  "        method: 'GET',",
                  "        header: { 'Content-Type': 'application/json' }",
                  "    },",
                  "    function (err, res) {",
                  "        pm.test(\"Confirmed the dog is deleted\", function () {",
                  "            pm.expect(res).to.not.be.undefined;",
                  "            if (res.code === 404) {",
                  "",
                  "                pm.expect(true).to.be.true;",
                  "                console.log(`Dog with ID ${dogId} was confirmed deleted.`);",
                  "            } else {",
                  "",
                  "                pm.expect.fail(`Dog with ID ${dogId} still exists!`);",
                  "            }",
                  "        });",
                  "    }",
                  ");"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog/{{dogId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog",
                "{{dogId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "create dog",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Basic status check",
                  "pm.test(\"Create dog: status is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "let body;",
                  "try {",
                  "    body = pm.response.json();",
                  "} catch (e) {",
                  "    pm.test(\"Response is valid JSON\", function () {",
                  "        pm.expect.fail(\"Response is not valid JSON: \" + e.message);",
                  "    });",
                  "    return;",
                  "}",
                  "",
                  "// Ensure we have a data object",
                  "pm.test(\"Create dog: response has data object\", function () {",
                  "    pm.expect(body).to.have.property(\"data\");",
                  "    pm.expect(body.data).to.be.an(\"object\");",
                  "});",
                  "",
                  "const dog = body.data;",
                  "",
                  "// Basic field checks (adjust fields to your actual schema)",
                  "pm.test(\"Create dog: dog has valid _id\", function () {",
                  "    pm.expect(dog).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "});",
                  "",
                  "// üîë Save dogId for use by other requests (like create food)",
                  "if (dog && dog._id) {",
                  "    pm.collectionVariables.set(\"dogId\", dog._id);",
                  "",
                  "    pm.test(\"dogId collection variable set\", function () {",
                  "        pm.expect(pm.collectionVariables.get(\"dogId\")).to.eql(dog._id);",
                  "    });",
                  "} else {",
                  "    pm.test(\"dogId could not be set\", function () {",
                  "        pm.expect.fail(\"No _id field found in created dog response.\");",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"eedy\",\n  \"breed\": \"brador\",\n  \"size\": \"Large\",\n  \"age\": 5\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ]
            }
          },
          "response": []
        },
        {
          "name": "All Dogs With Filters",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Success",
                  "pm.test(\"Success is true\", () => {",
                  "    pm.expect(body.success).to.be.true;",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Each dog has required properties",
                  "pm.test(\"Each dog has required properties\", () => {",
                  "    body.data.forEach(dog => {",
                  "        pm.expect(dog).to.have.property(\"name\");",
                  "        pm.expect(dog).to.have.property(\"breed\");",
                  "        pm.expect(dog).to.have.property(\"size\");",
                  "        pm.expect(dog).to.have.property(\"age\");",
                  "        pm.expect(dog).to.have.property(\"foodList\"); // always included unless excluded",
                  "    });",
                  "});",
                  "",
                  "// 5Ô∏è‚É£ Each dog matches filters",
                  "pm.test(\"Each dog matches breed and age filters\", () => {",
                  "    body.data.forEach(dog => {",
                  "        pm.expect(dog.breed).to.equal(\"pitbull\");",
                  "        pm.expect(dog.age).to.be.at.least(2);",
                  "        pm.expect(dog.age).to.be.at.most(10);",
                  "    });",
                  "});",
                  "",
                  "// 6Ô∏è‚É£ At least one dog has breed 'Labrador'",
                  "pm.test(\"At least one dog has breed 'pitbull'\", () => {",
                  "    const haspitbull = body.data.some(dog => dog.breed === \"pitbull\");",
                  "    pm.expect(haspitbull).to.be.true;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/dog?breed=pitbull&minAge=2&maxAge=10",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ],
              "query": [
                {
                  "key": "breed",
                  "value": "pitbull"
                },
                {
                  "key": "minAge",
                  "value": "2"
                },
                {
                  "key": "maxAge",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "get dogs pagination",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Data length <= limit",
                  "pm.test(\"Data length is <= pageSize\", () => {",
                  "    pm.expect(body.data.length).to.be.at.most(3);",
                  "});",
                  "",
                  "// 5Ô∏è‚É£ Pagination fields exist",
                  "pm.test(\"Count property exists\", () => {",
                  "    pm.expect(body).to.have.property(\"count\");",
                  "});",
                  "//Data exists",
                  "pm.test(\"Data exists for second page\", () => {",
                  "    pm.expect(body.data.length).to.be.greaterThan(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog?page=2&limit=3",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "2"
                },
                {
                  "key": "limit",
                  "value": "3"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "dog sort",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Success",
                  "pm.test(\"Success is true\", () => {",
                  "    pm.expect(body.success).to.be.true;",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Sorted by name ascending",
                  "pm.test(\"Dogs are sorted by name ascending\", () => {",
                  "    for (let i = 1; i < body.data.length; i++) {",
                  "        pm.expect(body.data[i].name >= body.data[i - 1].name).to.be.true;",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog?sortBy=name",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ],
              "query": [
                {
                  "key": "sortBy",
                  "value": "name"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "dog exclude field",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Success",
                  "pm.test(\"Success is true\", () => {",
                  "    pm.expect(body.success).to.be.true;",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "pm.test(\"Each dog has required properties excluding age\", () => {",
                  "    body.data.forEach(dog => {",
                  "        pm.expect(dog).to.have.property(\"name\");",
                  "        pm.expect(dog).to.have.property(\"breed\");",
                  "        pm.expect(dog).to.have.property(\"size\");",
                  "        pm.expect(dog).to.have.property(\"foodList\");",
                  "        pm.expect(dog).to.not.have.property(\"age\"); // excluded",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog?excludeFields=age",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ],
              "query": [
                {
                  "key": "excludeFields",
                  "value": "age"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "dog sort descending",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status code",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Success is true",
                  "pm.test(\"Success is true\", () => {",
                  "    pm.expect(body.success).to.be.true;",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Check each dog has age property",
                  "pm.test(\"Each dog has age property\", () => {",
                  "    body.data.forEach(dog => {",
                  "        pm.expect(dog).to.have.property(\"age\");",
                  "    });",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Check descending age",
                  "pm.test(\"Dogs are sorted by age descending\", () => {",
                  "    const ages = body.data.map(dog => dog.age);",
                  "    for (let i = 0; i < ages.length - 1; i++) {",
                  "        pm.expect(ages[i] >= ages[i + 1]).to.be.true;",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/dog?sortBy=-age",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "dog"
              ],
              "query": [
                {
                  "key": "sortBy",
                  "value": "-age"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "food",
      "item": [
        {
          "name": "get all food",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response contains array of foods\", function () {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body).to.have.property(\"data\");",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "pm.test(\"Each food has valid fields\", function () {",
                  "    const body = pm.response.json();",
                  "    body.data.forEach(food => {",
                  "        pm.expect(food).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "        pm.expect(food).to.have.property(\"foodtype\").that.is.a(\"string\");",
                  "        pm.expect([\"wet\", \"dry\"]).to.include(food.foodtype);",
                  "        pm.expect(food).to.have.property(\"flavor\").that.is.a(\"string\");",
                  "        pm.expect(food).to.have.property(\"cost\").that.is.a(\"number\");",
                  "        pm.expect(food.cost).to.be.within(1, 60);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ]
            }
          },
          "response": []
        },
        {
          "name": "get food by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const foodId = pm.collectionVariables.get(\"foodId\");",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Returned food matches requested ID\", function () {",
                  "    let food = body.data;",
                  "",
                  "    // If data is an array, find the food by ID",
                  "    if (Array.isArray(body.data)) {",
                  "        food = body.data.find(f => f._id === foodId);",
                  "    }",
                  "",
                  "    pm.expect(food, `Food with ID ${foodId} should exist`).to.exist;",
                  "    pm.expect(food._id).to.equal(foodId);",
                  "});",
                  "",
                  "pm.test(\"Returned food has valid fields\", function () {",
                  "    let food = body.data;",
                  "",
                  "    if (Array.isArray(body.data)) {",
                  "        food = body.data.find(f => f._id === foodId);",
                  "    }",
                  "",
                  "    pm.expect(food, `Food with ID ${foodId} should exist`).to.exist;",
                  "",
                  "    pm.expect([\"wet\", \"dry\"]).to.include(food.foodtype);",
                  "    pm.expect(food).to.have.property(\"flavor\").that.is.a(\"string\");",
                  "    pm.expect(food).to.have.property(\"cost\").that.is.a(\"number\");",
                  "    pm.expect(food.cost).to.be.within(1, 60);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/food/{{foodId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food",
                "{{foodId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "update food",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 (Created)\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Response body contains food object",
                  "pm.test(\"Response body contains food data\", function () {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body).to.have.property(\"data\");",
                  "    pm.expect(body.data).to.be.an(\"object\");",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Validate all required fields and constraints",
                  "pm.test(\"Created food has valid fields\", function () {",
                  "    const { data } = pm.response.json();",
                  "",
                  "    // _id exists",
                  "    pm.expect(data).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "",
                  "    // foodtype must be \"wet\" or \"dry\"",
                  "    pm.expect(data).to.have.property(\"foodtype\").that.is.a(\"string\");",
                  "    pm.expect([\"wet\",\"dry\"]).to.include(data.foodtype);",
                  "",
                  "    // flavor exists and is string",
                  "    pm.expect(data).to.have.property(\"flavor\").that.is.a(\"string\");",
                  "",
                  "    // cost exists and is between 1 and 60",
                  "    pm.expect(data).to.have.property(\"cost\").that.is.a(\"number\");",
                  "    pm.expect(data.cost).to.be.within(1,60);",
                  "",
                  "    // Save ID for future tests if needed",
                  "    pm.collectionVariables.set(\"foodId\", data._id);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"flavor\" : \"chicken\",\n    \"foodtype\" : \"dry\",\n    \"cost\" : \"50\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/food/{{foodId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food",
                "{{foodId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "delete food by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const foodId = pm.collectionVariables.get(\"foodId\");",
                  "const baseUrl = pm.environment.get(\"baseUrl\") || \"http://localhost:5001/api/v1\";",
                  "",
                  "// DELETE status check",
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "",
                  "// DELETE response confirmation",
                  "pm.test(\"Response confirms deletion\", function () {",
                  "    if (pm.response.code === 200) {",
                  "        const body = pm.response.json();",
                  "        pm.expect(body).to.have.property(\"message\");",
                  "        pm.expect(body.message.toLowerCase()).to.include(\"delete\");",
                  "    }",
                  "});",
                  "",
                  "pm.sendRequest(",
                  "    {",
                  "        url: `${baseUrl}/food/${foodId}`,",
                  "        method: 'GET',",
                  "        header: { 'Content-Type': 'application/json' }",
                  "    },",
                  "    function (err, res) {",
                  "        pm.test(\"Confirmed the food is deleted\", function () {",
                  "            pm.expect(res).to.not.be.undefined;",
                  "",
                  "            let body;",
                  "            try {",
                  "                body = res.json();",
                  "            } catch (e) {",
                  "                body = null;",
                  "            }",
                  "",
                  "            // ‚úÖ Pass if 404 OR data is null",
                  "            if (res.code === 404 || body?.data === null || body?.data === undefined) {",
                  "                pm.expect(true).to.be.true;",
                  "                console.log(`Food with ID ${foodId} was confirmed deleted.`);",
                  "            } else {",
                  "                console.log(\"Response after DELETE:\", body);",
                  "                pm.expect.fail(`Food with ID ${foodId} still exists!`);",
                  "            }",
                  "        });",
                  "    }",
                  ");",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/food/{{foodId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food",
                "{{foodId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "create food",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 1Ô∏è‚É£ Status code / high-level outcome",
                  "pm.test(\"Create food: status and high-level result\", function () {",
                  "    const code = pm.response.code;",
                  "    const body = pm.response.json();",
                  "",
                  "    if (code === 404) {",
                  "        pm.expect.fail(",
                  "            \"Create food failed with 404: Dog not found. \" +",
                  "            \"Make sure the 'dog' field in the body is a valid existing dog ID. \" +",
                  "            \"Use 'get all dogs' or 'create dog' to obtain a valid ID, \" +",
                  "            \"then set it as {{dogId}}.\"",
                  "        );",
                  "    }",
                  "",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Response contains data object when successful",
                  "pm.test(\"Response contains food data object when created\", function () {",
                  "    const code = pm.response.code;",
                  "    const body = pm.response.json();",
                  "",
                  "    if (code !== 201) {",
                  "        pm.expect.fail(",
                  "            \"Expected status 201 to validate data, but got \" + code +",
                  "            \". Response: \" + JSON.stringify(body)",
                  "        );",
                  "        return;",
                  "    }",
                  "",
                  "    pm.expect(body).to.have.property(\"data\");",
                  "    pm.expect(body.data).to.be.an(\"object\");",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Validate created food fields & save foodId",
                  "pm.test(\"Created food has valid fields\", function () {",
                  "    const code = pm.response.code;",
                  "    const body = pm.response.json();",
                  "",
                  "    if (code !== 201 || !body.data) {",
                  "        pm.expect.fail(",
                  "            \"Cannot validate food fields - response does not contain expected data structure. \" +",
                  "            \"Status: \" + code + \", body: \" + JSON.stringify(body)",
                  "        );",
                  "        return;",
                  "    }",
                  "",
                  "    const { data } = body;",
                  "",
                  "    pm.expect(data).to.have.property(\"_id\").that.is.a(\"string\").with.lengthOf(24);",
                  "    pm.expect(data).to.have.property(\"foodtype\").that.is.a(\"string\");",
                  "    pm.expect([\"wet\", \"dry\"]).to.include(data.foodtype);  // Must be wet or dry",
                  "    pm.expect(data).to.have.property(\"flavor\").that.is.a(\"string\");",
                  "    pm.expect(data).to.have.property(\"cost\").that.is.a(\"number\");",
                  "    pm.expect(data.cost).to.be.within(1, 60); // cost between 1 and 60",
                  "",
                  "    // Save foodId for later requests",
                  "    pm.collectionVariables.set(\"foodId\", data._id);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"dog\": \"{{dogId}}\",\n    \"foodtype\": \"dry\",\n    \"flavor\": \"Chicken\",\n    \"cost\": 25\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:5001/api/v1/food",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ]
            }
          },
          "response": []
        },
        {
          "name": "get food filter",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Success",
                  "pm.test(\"Success is true\", () => {",
                  "    pm.expect(body.success).to.be.true;",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Each food has required properties (excluding cost)",
                  "pm.test(\"Each food has required properties\", () => {",
                  "    body.data.forEach(food => {",
                  "        pm.expect(food).to.have.property(\"foodtype\");",
                  "        pm.expect(food).to.have.property(\"flavor\");",
                  "        pm.expect(food).to.not.have.property(\"cost\"); // excluded field",
                  "    });",
                  "});",
                  "",
                  "// 5Ô∏è‚É£ Each food matches filters",
                  "pm.test(\"Each food matches filters\", () => {",
                  "    body.data.forEach(food => {",
                  "        pm.expect(food.foodtype).to.equal(\"wet\");",
                  "        pm.expect(food.flavor).to.equal(\"chicken\");",
                  "    });",
                  "});",
                  "",
                  "// 6Ô∏è‚É£ At least one food has flavor 'chicken'",
                  "pm.test(\"At least one food has flavor 'chicken'\", () => {",
                  "    const hasChicken = body.data.some(food => food.flavor === \"chicken\");",
                  "    pm.expect(hasChicken).to.be.true;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food?foodtype=wet&flavor=chicken&minCost=10&maxCost=50&excludeFields=cost",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ],
              "query": [
                {
                  "key": "foodtype",
                  "value": "wet"
                },
                {
                  "key": "flavor",
                  "value": "chicken"
                },
                {
                  "key": "minCost",
                  "value": "10"
                },
                {
                  "key": "maxCost",
                  "value": "50"
                },
                {
                  "key": "excludeFields",
                  "value": "cost"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "get food pagination",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Data is array",
                  "pm.test(\"Data is an array\", () => {",
                  "    pm.expect(body.data).to.be.an(\"array\");",
                  "});",
                  "",
                  "// 4Ô∏è‚É£ Data length <= limit",
                  "pm.test(\"Data length is <= pageSize\", () => {",
                  "    pm.expect(body.data.length).to.be.at.most(3);",
                  "});",
                  "",
                  "// 5Ô∏è‚É£ Pagination fields exist",
                  "pm.test(\"Count property exists\", () => {",
                  "    pm.expect(body).to.have.property(\"count\");",
                  "});",
                  "//Data exists",
                  "pm.test(\"Data exists for second page\", () => {",
                  "    pm.expect(body.data.length).to.be.greaterThan(0);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food?page=1&limit=3",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "3"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "food exlcuded fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "",
                  "// 1Ô∏è‚É£ Status",
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 2Ô∏è‚É£ Each object excludes 'cost'",
                  "pm.test(\"Cost field is excluded\", () => {",
                  "    body.data.forEach(food => {",
                  "        pm.expect(food).to.not.have.property(\"cost\");",
                  "    });",
                  "});",
                  "",
                  "// 3Ô∏è‚É£ Other required fields exist",
                  "pm.test(\"Other required properties exist\", () => {",
                  "    body.data.forEach(food => {",
                  "        pm.expect(food).to.have.property(\"foodtype\");",
                  "        pm.expect(food).to.have.property(\"flavor\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food?excludeFields=cost",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ],
              "query": [
                {
                  "key": "excludeFields",
                  "value": "cost"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "food sorting asc",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "const types = body.data.map(food => food.foodtype);",
                  "",
                  "pm.test(\"Status code is 200\", () => {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Foodtypes sorted ascending\", () => {",
                  "  const sorted = [...types].sort((a, b) => a.localeCompare(b));",
                  "  pm.expect(types).to.eql(sorted);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food?sortBy=foodtype",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ],
              "query": [
                {
                  "key": "sortBy",
                  "value": "foodtype"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "food sorting desc",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const body = pm.response.json();",
                  "const types = body.data.map(food => food.foodtype);",
                  "",
                  "pm.test(\"Status code is 200\", () => {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Foodtypes sorted descending\", () => {",
                  "  const sorted = [...types].sort((a, b) => b.localeCompare(a));",
                  "  pm.expect(types).to.eql(sorted);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/v1/food?sortBy=-foodtype",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5001",
              "path": [
                "api",
                "v1",
                "food"
              ],
              "query": [
                {
                  "key": "sortBy",
                  "value": "-foodtype"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "dogId",
      "value": ""
    },
    {
      "key": "foodId",
      "value": ""
    }
  ]
}